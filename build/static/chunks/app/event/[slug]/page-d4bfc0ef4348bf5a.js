(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[882],{4301:function(e,t,s){Promise.resolve().then(s.bind(s,138))},138:function(e,t,s){"use strict";s.d(t,{EventDetailClient:function(){return x}});var a=s(7573),l=s(7653),n=s(7754);function r(e){var t;let{tiers:s,tickets:r,tier:i,onTierChange:d,onTicketsChange:c,eventSlug:o,selectedZoneId:m}=e,x=s.find(e=>e.key===i),u=null!==(t=null==x?void 0:x.maxTickets)&&void 0!==t?t:9,h=(0,n.useRouter)(),[b,p]=(0,l.useState)(""),[v,j]=(0,l.useState)(""),[g,f]=(0,l.useState)(""),[N,k]=(0,l.useState)("idle"),[y,w]=(0,l.useState)("");return(0,a.jsxs)("div",{className:"glass rounded-3xl p-6",children:[(0,a.jsx)("div",{className:"text-base font-semibold text-slate-900 dark:text-white",children:"Booking details"}),(0,a.jsx)("label",{className:"mt-4 block text-sm text-slate-600 dark:text-slate-300",htmlFor:"tierSelect",children:"Customer tier"}),(0,a.jsx)("select",{id:"tierSelect",className:"input-base mt-2",value:i,onChange:e=>d(e.target.value),children:s.map(e=>(0,a.jsxs)("option",{value:e.key,children:[e.label," \xb7 up to ",e.maxTickets," tickets"]},e.key))}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("label",{className:"block text-sm text-slate-600 dark:text-slate-300",htmlFor:"ticketCount",children:"Tickets"}),(0,a.jsx)("input",{id:"ticketCount",className:"input-base mt-2",type:"number",min:1,max:u,value:r,onChange:e=>c(Number(e.target.value))}),(0,a.jsxs)("div",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:["Max allowed for this tier: ",u]})]}),(0,a.jsxs)("div",{className:"mt-5",children:[(0,a.jsx)("label",{className:"block text-sm text-slate-600 dark:text-slate-300",htmlFor:"name",children:"Name"}),(0,a.jsx)("input",{id:"name",className:"input-base mt-2",placeholder:"Full name",value:b,onChange:e=>p(e.target.value)})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("label",{className:"block text-sm text-slate-600 dark:text-slate-300",htmlFor:"email",children:"Email"}),(0,a.jsx)("input",{id:"email",className:"input-base mt-2",placeholder:"name@email.com",type:"email",value:v,onChange:e=>j(e.target.value)})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("label",{className:"block text-sm text-slate-600 dark:text-slate-300",htmlFor:"phone",children:"Mobile number"}),(0,a.jsx)("input",{id:"phone",className:"input-base mt-2",placeholder:"+1 555 0100",value:g,onChange:e=>f(e.target.value)})]}),(0,a.jsxs)("div",{className:"mt-4 rounded-2xl border border-slate-100 bg-white p-4 text-sm text-slate-600 shadow-sm dark:border-slate-800 dark:bg-slate-900 dark:text-slate-300",children:[(0,a.jsx)("div",{className:"font-semibold text-slate-900 dark:text-white",children:"OTP verification"}),"idle"===N&&(0,a.jsx)("button",{className:"btn-secondary mt-3",type:"button",onClick:()=>k("sent"),children:"Send OTP"}),"sent"===N&&(0,a.jsxs)("div",{className:"mt-3 grid gap-3 md:grid-cols-[1fr_auto]",children:[(0,a.jsx)("input",{className:"input-base",placeholder:"Enter OTP",value:y,onChange:e=>w(e.target.value)}),(0,a.jsx)("button",{className:"btn-primary",type:"button",onClick:()=>k(/^\d{4}$/.test(y.trim())?"verified":"sent"),children:"Verify"})]}),"verified"===N&&(0,a.jsx)("div",{className:"mt-3 text-sm font-semibold text-brand-600",children:"OTP verified ✅"})]}),(0,a.jsx)("button",{className:"btn-primary mt-6 w-full",onClick:()=>{if(!b.trim()||!v.trim()||!g.trim()){window.alert("Please fill name, email, and mobile number.");return}if("verified"!==N){window.alert("Please verify OTP before continuing.");return}let e=new URLSearchParams({tickets:String(r),tier:i,zone:m,name:b,email:v,phone:g});h.push("/checkout/".concat(o,"?").concat(e.toString()))},type:"button",children:"Continue to payment"})]})}function i(e,t){let s=t.distanceFactor;return"decrease_with_distance"===e.priceCurve?Math.max(10,Math.round(t.basePrice*(1-.4*s))):Math.max(10,Math.round(t.basePrice*(1+.4*s)))}function d(e){let{event:t,zone:s,tickets:l,discountPercent:n}=e,r=i(t,s),d=function(e,t,s,a){let l=i(e,t)*s;return a&&a>0?Math.max(0,Math.round(l*(1-a/100))):l}(t,s,l,n);return(0,a.jsxs)("div",{className:"glass rounded-3xl p-6",children:[(0,a.jsx)("div",{className:"text-base font-semibold text-slate-900 dark:text-white",children:"Pricing summary"}),(0,a.jsxs)("div",{className:"mt-3 space-y-1 text-sm text-slate-600 dark:text-slate-300",children:[(0,a.jsxs)("div",{children:["Zone price: ",r," ",t.currency]}),(0,a.jsxs)("div",{children:["Tickets: ",l]}),n?(0,a.jsxs)("div",{children:["Discount: ",n,"%"]}):null]}),(0,a.jsxs)("div",{className:"mt-4 text-xl font-semibold text-slate-900 dark:text-white",children:["Total: ",d," ",t.currency]})]})}function c(e){let{event:t,selectedZone:s,onSelectZone:n}=e,r=t.seatMap.zones,d=(0,l.useMemo)(()=>Math.max(...r.map(e=>e.cols)),[r]);return(0,a.jsxs)("div",{className:"glass rounded-3xl p-6",children:[(0,a.jsx)("div",{className:"text-base font-semibold text-slate-900 dark:text-white",children:"stage_top"===t.seatMap.orientation?"Stage":"Screen"}),(0,a.jsx)("div",{className:"mt-4 grid gap-3",children:r.map(e=>{let l=i(t,e);return(0,a.jsxs)("button",{className:"rounded-2xl border p-4 text-left transition ".concat(e.id===s.id?"border-brand-500 bg-brand-50 dark:bg-slate-900":"border-slate-200 bg-white hover:border-brand-200 dark:border-slate-800 dark:bg-slate-900"),onClick:()=>n(e),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:e.label}),(0,a.jsxs)("div",{className:"text-xs text-slate-500 dark:text-slate-300",children:[l," ",t.currency]})]}),(0,a.jsx)("div",{className:"mt-3 grid gap-1",style:{gridTemplateColumns:"repeat(".concat(d,", 1fr)")},children:Array.from({length:e.rows*d}).map((t,l)=>{let n=Math.floor(l/d),r=l%d,i=n<e.rows&&r<e.cols;return(0,a.jsx)("div",{className:"h-5 rounded-md text-center text-[9px] ".concat(e.id===s.id?"bg-brand-500 text-white":"bg-slate-100 dark:bg-slate-800"),style:{opacity:i?1:0},children:i?"•":""},"".concat(e.id,"-").concat(l))})})]},e.id)})})]})}function o(e){let{venue:t}=e;return(0,a.jsxs)("div",{className:"glass rounded-3xl p-6",children:[(0,a.jsx)("div",{className:"text-base font-semibold text-slate-900 dark:text-white",children:"Venue map"}),(0,a.jsx)("div",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:t.name}),(0,a.jsxs)("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:[t.address,", ",t.city]}),(0,a.jsx)("div",{className:"mt-4 flex h-40 items-center justify-center rounded-2xl bg-gradient-to-br from-brand-100 to-brand-50 text-sm font-semibold text-slate-700 dark:from-slate-900 dark:to-slate-800 dark:text-slate-200",children:"Map preview"})]})}function m(e){let{opensAt:t}=e,[s,n]=(0,l.useState)(null);return((0,l.useEffect)(()=>{let e=new Date(t).getTime(),s=setInterval(()=>{let t=Math.floor((e-Date.now())/1e3);t<=9&&t>0?n(t):t<=0?n(0):n(null)},1e3);return()=>clearInterval(s)},[t]),null===s)?null:0===s?(0,a.jsx)("span",{className:"badge badge-brand",children:"Booking open"}):(0,a.jsxs)("span",{className:"badge badge-muted",children:["Opens in ",s,"s"]})}function x(e){var t,s,n;let{event:i,tiers:x}=e,[u,h]=(0,l.useState)(i.seatMap.zones[0]),[b,p]=(0,l.useState)(2),[v,j]=(0,l.useState)(null!==(s=null===(t=x[0])||void 0===t?void 0:t.key)&&void 0!==s?s:"normal"),g=(0,l.useMemo)(()=>i.isPromoted?10:0,[i.isPromoted]);return(0,a.jsxs)("main",{className:"mx-auto max-w-6xl px-6 py-10",children:[(0,a.jsxs)("section",{className:"grid gap-8 md:grid-cols-[1.1fr_0.9fr]",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"badge badge-brand",children:i.type.toUpperCase()}),i.isPromoted&&(0,a.jsx)("span",{className:"badge badge-muted",children:"Promoted"})]}),(0,a.jsx)("h1",{className:"text-4xl font-semibold text-slate-900 dark:text-white",children:i.title}),(0,a.jsx)("p",{className:"text-base text-slate-600 dark:text-slate-300",children:null!==(n=i.about)&&void 0!==n?n:"Experience an unforgettable night with immersive audio, brilliant visuals, and a crowd that brings the energy."}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3 text-sm text-slate-500 dark:text-slate-300",children:[(0,a.jsxs)("span",{children:[i.venue.city,", ",i.venue.country]}),(0,a.jsx)("span",{children:"\xb7"}),(0,a.jsx)("span",{children:new Date(i.schedule.startAt).toLocaleString()})]})]}),(0,a.jsxs)("div",{className:"glass rounded-3xl p-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Booking opens"}),(0,a.jsx)(m,{opensAt:i.schedule.bookingOpensAt})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(d,{event:i,zone:u,tickets:b,discountPercent:g})})]})]}),(0,a.jsxs)("section",{className:"mt-10 grid gap-6 lg:grid-cols-[1.1fr_0.9fr]",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(c,{event:i,selectedZone:u,onSelectZone:h}),(0,a.jsx)(o,{venue:i.venue})]}),(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsx)(r,{tiers:x,tickets:b,tier:v,onTierChange:j,onTicketsChange:e=>p(Math.max(1,e)),eventSlug:i.slug,selectedZoneId:u.id})})]})]})}},7754:function(e,t,s){"use strict";var a=s(534);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[293,286,744],function(){return e(e.s=4301)}),_N_E=e.O()}]);
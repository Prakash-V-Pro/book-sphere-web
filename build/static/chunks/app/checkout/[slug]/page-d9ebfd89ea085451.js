(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[805],{8198:function(e,t,a){Promise.resolve().then(a.bind(a,6991))},6991:function(e,t,a){"use strict";a.d(t,{CheckoutClient:function(){return r}});var s=a(7573),l=a(7653);function n(e){let{steps:t,activeIndex:a}=e;return(0,s.jsx)("div",{className:"mt-6 flex gap-2",children:t.map((e,t)=>(0,s.jsx)("div",{className:"flex-1 rounded-full px-3 py-2 text-center text-xs font-medium ".concat(t===a?"bg-brand-100 text-brand-700":"bg-slate-100 text-slate-500 dark:bg-slate-900 dark:text-slate-400"),children:e},e))})}var i=a(7754);function r(e){var t,a,r,d,c,o;let{event:x,config:u}=e,[m,h]=(0,l.useState)(!1),[p,g]=(0,l.useState)(""),[v,b]=(0,l.useState)("Card"),[j,N]=(0,l.useState)(""),[k,f]=(0,l.useState)(""),[P,C]=(0,l.useState)(""),[w,S]=(0,l.useState)(""),[y,I]=(0,l.useState)(""),[M,E]=(0,l.useState)(""),[R,U]=(0,l.useState)(""),[D,_]=(0,l.useState)(!1),[A,T]=(0,l.useState)(!1),B=(0,i.useRouter)(),F=(0,i.useSearchParams)(),G=Number(null!==(t=F.get("tickets"))&&void 0!==t?t:1),O=null!==(a=F.get("tier"))&&void 0!==a?a:"normal",V=null!==(r=F.get("zone"))&&void 0!==r?r:"",W=null!==(d=F.get("name"))&&void 0!==d?d:"Guest",L=null!==(c=F.get("email"))&&void 0!==c?c:"",Y=null!==(o=F.get("phone"))&&void 0!==o?o:"",z=(0,l.useMemo)(()=>Math.max(0,Math.round(Math.max(1,G)*Math.max(10,Math.round(.7*x.basePrice))*(1-(p?10:0)/100))),[G,x.basePrice,p]);return(0,s.jsxs)("main",{className:"mx-auto max-w-6xl px-6 py-10",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h1",{className:"text-3xl font-semibold text-slate-900 dark:text-white",children:"Checkout"}),(0,s.jsx)("div",{className:"text-sm text-slate-500 dark:text-slate-300",children:x.title})]}),(0,s.jsx)(n,{steps:["Select seats","Confirm details","Pay","Get tickets"],activeIndex:2}),(0,s.jsxs)("div",{className:"mt-8 grid gap-6 md:grid-cols-2",children:[(0,s.jsxs)("div",{className:"glass rounded-3xl p-6",children:[(0,s.jsxs)("div",{className:"mb-4 rounded-2xl border border-slate-100 bg-white p-4 text-sm text-slate-600 shadow-sm dark:border-slate-800 dark:bg-slate-900 dark:text-slate-200",children:[(0,s.jsx)("div",{className:"font-semibold text-slate-900 dark:text-white",children:"Booking summary"}),(0,s.jsxs)("div",{className:"mt-2",children:["Tickets: ",G]}),(0,s.jsxs)("div",{children:["Tier: ",O]}),(0,s.jsxs)("div",{children:["Zone: ",V||"Auto"]}),(0,s.jsxs)("div",{className:"mt-2 font-semibold text-slate-900 dark:text-white",children:["Total: ",z," ",x.currency]})]}),(0,s.jsx)("div",{className:"text-base font-semibold text-slate-900 dark:text-white",children:"Payment options"}),(0,s.jsx)("div",{className:"mt-4 grid gap-2 text-sm text-slate-600 dark:text-slate-300",children:u.paymentGateways.map(e=>(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"radio",name:"payment",checked:v===e,onChange:()=>b(e)}),e]},e))}),"Card"===v&&(0,s.jsxs)("div",{className:"mt-4 grid gap-3",children:[(0,s.jsx)("input",{className:"input-base",placeholder:"Card number",value:j,onChange:e=>N(e.target.value)}),(0,s.jsx)("input",{className:"input-base",placeholder:"Name on card",value:k,onChange:e=>f(e.target.value)}),(0,s.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,s.jsx)("input",{className:"input-base",placeholder:"MM/YY",value:P,onChange:e=>C(e.target.value)}),(0,s.jsx)("input",{className:"input-base",placeholder:"CVV",value:w,onChange:e=>S(e.target.value)})]})]}),"UPI"===v&&(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("input",{className:"input-base",placeholder:"UPI ID (name@bank)",value:y,onChange:e=>I(e.target.value)})}),"NetBanking"===v&&(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsxs)("select",{className:"input-base",value:M,onChange:e=>E(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Select bank"}),(0,s.jsx)("option",{children:"HDFC"}),(0,s.jsx)("option",{children:"ICICI"}),(0,s.jsx)("option",{children:"SBI"}),(0,s.jsx)("option",{children:"Axis"})]})}),"Wallet"===v&&(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsxs)("select",{className:"input-base",value:R,onChange:e=>U(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Select wallet"}),(0,s.jsx)("option",{children:"Paytm"}),(0,s.jsx)("option",{children:"PhonePe"}),(0,s.jsx)("option",{children:"Google Pay"})]})}),u.featureFlags.discounts&&(0,s.jsxs)("div",{className:"mt-5",children:[(0,s.jsx)("label",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Discount code"}),(0,s.jsx)("input",{className:"input-base mt-2",value:p,onChange:e=>g(e.target.value),placeholder:"PROMO10"}),(0,s.jsx)("div",{className:"mt-2 flex flex-wrap gap-2 text-xs text-slate-500",children:["LIVE10","WEEKEND15","FAN25"].map(e=>(0,s.jsx)("button",{type:"button",className:"rounded-full border border-slate-200 px-3 py-1 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-900",onClick:()=>g(e),children:e},e))})]})]}),(0,s.jsxs)("div",{className:"glass rounded-3xl p-6",children:[(0,s.jsx)("div",{className:"text-base font-semibold text-slate-900 dark:text-white",children:"Customer details"}),(0,s.jsxs)("div",{className:"mt-3 text-sm text-slate-600 dark:text-slate-300",children:[(0,s.jsx)("div",{children:W}),(0,s.jsx)("div",{children:L}),(0,s.jsx)("div",{children:Y})]}),(0,s.jsx)("div",{className:"mt-6 text-base font-semibold text-slate-900 dark:text-white",children:"Add-ons"}),x.parkingAvailable&&u.featureFlags.parking&&(0,s.jsxs)("label",{className:"mt-4 flex items-center gap-2 text-sm text-slate-600 dark:text-slate-300",children:[(0,s.jsx)("input",{type:"checkbox",checked:m,onChange:()=>h(!m)}),"Parking ticket"]}),(0,s.jsx)("button",{className:"btn-primary mt-6 w-full",onClick:()=>{if("Card"===v&&(!j||!k||!P||!w)){window.alert("Please fill card details.");return}if("UPI"===v&&!y){window.alert("Please enter UPI ID.");return}if("NetBanking"===v&&!M){window.alert("Please select a bank.");return}if("Wallet"===v&&!R){window.alert("Please select a wallet.");return}_(!0),setTimeout(()=>{T(!0),setTimeout(()=>{let e=new URLSearchParams({bookingId:crypto.randomUUID(),tickets:String(G),tier:O,zone:V,name:W,email:L,phone:Y});B.push("/success/".concat(x.slug,"?").concat(e.toString()))},900)},1600)},type:"button",disabled:D,children:D?"Processing...":"Pay and confirm"}),D&&(0,s.jsxs)("div",{className:"mt-3 flex items-center gap-2 text-sm text-slate-600 dark:text-slate-300",children:[(0,s.jsx)("span",{className:"h-3 w-3 animate-pulse rounded-full bg-brand-400"}),"Processing payment..."]}),A&&(0,s.jsx)("div",{className:"mt-3 text-sm font-semibold text-brand-600",children:"Payment complete âœ“ Redirecting..."})]})]})]})}},7754:function(e,t,a){"use strict";var s=a(534);a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})}},function(e){e.O(0,[293,286,744],function(){return e(e.s=8198)}),_N_E=e.O()}]);